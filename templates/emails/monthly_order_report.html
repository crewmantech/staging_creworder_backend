<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Monthly Order Report</title>
</head>

<body style="margin:0;padding:0;background:#eef1f5;font-family:Arial, Helvetica, sans-serif;">

<table width="100%" cellpadding="0" cellspacing="0" style="background:#eef1f5;padding:20px;">
<tr>
<td align="center">

<!-- MAIN CONTAINER -->
<table width="900" cellpadding="0" cellspacing="0" style="background:#ffffff;border-radius:8px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.08);">

    <!-- HEADER -->
    <tr>
        <td style="background:#2f80ed;padding:20px;color:#ffffff;">
            <h2 style="margin:0;">ðŸ“Š Monthly Order Report</h2>
            <p style="margin:5px 0 0;font-size:14px;">
                {{ company_name }} | {{ start_date }} â†’ {{ end_date }}
            </p>
        </td>
    </tr>

    <!-- BODY -->
    <tr>
        <td style="padding:25px;">

            <!-- OVERALL SUMMARY -->
            <h3 style="margin-top:0;color:#333;">ðŸ“Œ Overall Summary</h3>

            <table width="100%" cellpadding="12" cellspacing="0" style="border-collapse:collapse;margin-bottom:25px;">
                <tr style="background:#f7f9fc;">
                    <td><b>Total Orders</b></td>
                    <td align="right">{{ summary.total_orders }}</td>
                </tr>
                <tr>
                    <td><b>Total Amount</b></td>
                    <td align="right">â‚¹ {{ summary.total_amount }}</td>
                </tr>
                <tr style="background:#f7f9fc;">
                    <td><b>Total Discount</b></td>
                    <td align="right">â‚¹ {{ summary.total_discount }}</td>
                </tr>
                <tr>
                    <td><b>Gross Amount</b></td>
                    <td align="right">â‚¹ {{ summary.total_gross_amount }}</td>
                </tr>
            </table>

            <!-- STATUS SUMMARY -->
            <h3 style="color:#333;">ðŸ“Š Status-wise Summary</h3>

            <table width="100%" cellpadding="10" cellspacing="0" style="border-collapse:collapse;margin-bottom:30px;">
                <tr style="background:#e8f0fe;">
                    <th align="left">Status</th>
                    <th align="right">Orders</th>
                    <th align="right">Amount</th>
                </tr>

                {% for s in status_summary %}
                <tr style="border-bottom:1px solid #eee;">
                    <td>{{ s.status }}</td>
                    <td align="right">{{ s.orders }}</td>
                    <td align="right">â‚¹ {{ s.amount }}</td>
                </tr>
                {% endfor %}
            </table>

            <!-- USER-WISE BREAKDOWN -->
            <h3 style="color:#333;">
                {% if role == "ADMIN" %}
                    ðŸ‘¥ Company User-wise Breakdown
                {% else %}
                    ðŸ‘¥ Team User-wise Breakdown
                {% endif %}
            </h3>

            {% for u in user_wise %}
            <div style="margin-bottom:25px;border:1px solid #e0e0e0;border-radius:6px;overflow:hidden;">

                <!-- USER HEADER -->
                <div style="background:#f7f9fc;padding:12px 15px;">
                    <b>{{ u.name }}</b>
                    <span style="color:#777;font-size:13px;">({{ u.username }})</span>
                </div>

                <!-- USER TABLE -->
                <table width="100%" cellpadding="10" cellspacing="0" style="border-collapse:collapse;">
                    <tr style="background:#eef4ff;">
                        <th align="left">Status</th>
                        <th align="right">Orders</th>
                        <th align="right">Amount</th>
                    </tr>

                    {% for s in u.statuses %}
                    <tr style="border-bottom:1px solid #eee;">
                        <td>{{ s.status }}</td>
                        <td align="right">{{ s.orders }}</td>
                        <td align="right">â‚¹ {{ s.amount }}</td>
                    </tr>
                    {% endfor %}

                    <tr style="background:#f2f2f2;font-weight:bold;">
                        <td>Total</td>
                        <td align="right">{{ u.total_orders }}</td>
                        <td align="right">â‚¹ {{ u.total_amount }}</td>
                    </tr>
                </table>

            </div>
            {% endfor %}

        </td>
    </tr>

    <!-- FOOTER -->
    <tr>
        <td style="background:#fafafa;padding:15px;text-align:center;color:#888;font-size:12px;">
            This is an auto-generated report. Please do not reply.
        </td>
    </tr>

</table>

</td>
</tr>
</table>

</body>
</html>
